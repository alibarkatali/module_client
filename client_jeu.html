<!DOCTYPE html>
<html lang="fr">
<head>
  <title>Jeu</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="CSS.css">
  <link href='https://fonts.googleapis.com/css?family=Ubuntu:500' rel='stylesheet' type='text/css'>
</head>

<body>
<h1 id="titleHeader">JEU LIMONADE FACE/OFF</h1>
<!-- rejoindre la partie -->
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="row margintobloc">
      <div class="col-md-6 col-md-offset-3">
        <h3 class="center">Rejoindre la partie en cours</h3>
        <div class="center">
          <form id="formGameJoin" method="POST">
          <input type="text" name="name" id="name" placeholder="Votre pseudo">
          <button id="addPlayer" type="button" class="btn btn-success form-control">Valider</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- information sur la partie en cours -->
<div class="container-fluid bloccontent">
  <div class="row">
    <div class="col-sm-3">
      <div class="hero-widget well well-sm">
        <div class="text infobloc weatherToday">
          <em class="smallTitle">météo du jour</em>
          <span id="weatherToday" class="meteotxt"></span>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="hero-widget well well-sm">
        <div class="text infobloc weatherTomorrow">
          <em class="smallTitle">météo de demain</em>
          <span id="weatherTomorrow" class="meteotxt"></span>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="hero-widget well well-sm">
        <div class="text infobloc timer">
          <em class="smallTitle">temps</em>
          <span id="timer" class="tempstxt"></span>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="hero-widget well well-sm">
        <div class="text infobloc budgetplayer">
          <em class="smallTitle">Budget</em>
          <span id="budgetplayer" class="budgettxt"></span>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6">
      <div class="hero-widget well well-sm">
        <h3 id="titleHeader smalltitle">Information sur le jeu en cours</h3>
        <!-- mini-menu -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Carte</a></li>
          <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Liste de joueurs</a></li>
        </ul>
        <div class="tab-content">
        <!-- gestion carte --> 
          <div role="tabpanel" class="tab-pane active" id="home">
            <div class="header">
              <p class="title1">Stands & Panneaux Pub</p>
            </div>
            <div id="gameMap"></div>            
          </div>
          <div role="tabpanel" class="tab-pane" id="profile">           
        <!-- gestion liste joueurs en ligne-->
          <div class="col-md-12">
            <div class="header">
              <p class="title1">Joueurs en ligne<span id="day">#jour</span></p>
            </div>
            <div >
              <ul id="playerList" class="list-group"> 
              </ul>
            </div>
          </div>
        </div>
      </div>
      </div>
        <button id="reinitial" type="button" class="btn btn-xs btn-danger pull-left">Réinitialisation du jeu</button>
    </div>
    <div class="col-sm-6">
      <div class="hero-widget well well-sm">
        <!-- Information du lendemain -->
        <h3 class="center">Action pour le lendemain</h3> 
          <p class="alignLeft">Préparation de vos boissons :</p>  
          <div class="row">
            <form id="formproduction">
              <div class="col-md-2">
                <select id="recettadd" class="selectpicker"></select>
              </div>
              <div class="col-md-2">
                <span id="prixunitaire"></span>
              </div>
              <div class="col-md-2">
                <input id="quantity" type="number" class="form-control" placeholder="Quantité">
              </div>
              <div class="col-md-2">
                <input id="prixvente" type="number" class="form-control" placeholder="Prix Vente">
              </div>
              <div class="col-md-2">
                <input type="submit" id="btnaddrecette" value="Valider">
              </div>
            </form>
          </div>
          <div class="bloccenter margintobloc">
          <table id="playerpipe" class="table table-bordered">
            <thead>
              <tr>
                <th>Boisson</th>
                <th>Coût U</th>
                <th>Prix V</th>
                <th>QTT</th>
                <th>Coût T</th>
                <th>Prix VT</th>
                <th>Eff ligne</th>
              </tr>
            </thead>
          </table>
           </div>
           <p class="margintobloc">Somme totale du stand : <span id="sumStand">"total"</span>€</p>
          <button id="valAction" type="button" class="btn btn-lg btn-success center-block">Valider l'action</button>
      </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script>

function getMetrology () {
    $.ajax({
      url: "/metrology", 
      type: "GET",
      contentType: 'application/json',
      success: function(result){
        var disDay = "Jour "+Math.trunc(result.timestamp/24)+" - "+result.timestamp%24+"H00";
        $('#timer').html(disDay);
        $.each(result.weather, function( index, value ) {
          var meteo = result.weather;
          if(value['dfn'] == 0) 
            switch (meteo) {
              case "Rainy":
                $('#weatherToday').html('<img src="image/rain_light.png"/>');
              break;

              case "Cloudy":
                $('#weatherToday').html('<img src="image/cloudy.png"/>');
              break;

              case "Heatwave":
                $('#weatherToday').html('<img src="image/sunny.png"/>');
              break;

              case "Sunny":
                $('#weatherToday').html('<img src="image/partly_cloudy.png"/>');
              break;

              case "Thunderstorm":
                $('#weatherToday').html('<img src="image/rain.png"/>');
              break;

          else 
            switch (meteo) {
              case "Rainy":
                $('#weatherTomorrow').html('<img src="image/rain_light.png"/>');
              break;

              case "Cloudy":
                $('#weatherTomorrow').html('<img src="image/cloudy.png"/>');
              break;

              case "Heatwave":
                $('#weatherTomorrow').html('<img src="image/sunny.png"/>');
              break;

              case "Sunny":
                $('#weatherTomorrow').html('<img src="image/partly_cloudy.png"/>');
              break;

              case "Thunderstorm":
                $('#weatherTomorrow').html('<img src="image/rain.png"/>');
              break;
        });
        }
    });
  }
</script>

</body>
</html>